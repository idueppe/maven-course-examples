<project name="ejb3 :: solution 01 :: sessionbeans" default="install" basedir=".">
	
	<condition property="maven.executable" value="mvn.bat" else="mvn"><os family="windows" /></condition>
	<condition property="asadmin.executable" value="asadmin.bat" else="asadmin"><os family="windows"/></condition>
	
	<property environment="env"/>
	
	<property name="appname" value="solution.01.sessionbeans"/>
	<property name="asadmin" location="${env.GLASSFISH_HOME}/bin/${asadmin.executable}" />
	<property name="earfile" location="${basedir}/target/${appname}.ear"/>
	
	<property name="admin.host" value="localhost"/>
	<property name="admin.port" value="4848" />
	<property name="admin.user" value="admin" />
	<property name="admin.pwfile" location="password.txt" />
	
	<target name="init">
	</target>
	
	<target name="install" description="maven install">
		<exec executable="${maven.executable}">
			<arg line="install"/>
		</exec>
	</target>
	
	<target name="clean" description="maven clean">
		<exec executable="${maven.executable}">
			<arg line="clean"/>
		</exec>
	</target>
	
	<target name="eclipse" description="eclipse">
		<exec executable="${maven.executable}">
			<arg line="eclipse:clean eclipse:eclipse"/>
		</exec>
	</target>
	
	<target name="glassfish-start" description="">
		<exec executable="${asadmin}" failonerror="false">
			<arg line="start-domain domain1"/>
		</exec>
	</target>
	
	<target name="glassfish-stop" description="">
		<exec executable="${asadmin}" failonerror="false">
			<arg line="stop-domain domain1"/>
		</exec>
	</target>
	
	<target name="glassfish-deploy" depends="init, clean, install" description="">
		<exec executable="${asadmin}" failonerror="false">
			<arg line="deploy" />
			<arg line="--user ${admin.user}" />
			<arg line="--passwordfile ${admin.pwfile}" />
			<arg line="--host ${admin.host}" />
			<arg line="--port ${admin.port}" />
			<arg line="--upload=true" />
			<arg line="${earfile}" />
		</exec>
	</target>
	
	<target name="glassfish-undeploy" depends="" description="">
		<exec executable="${asadmin}" failonerror="false">
			<arg line="undeploy" />
			<arg line="--user ${admin.user}" />
			<arg line="--passwordfile ${admin.pwfile}" />
			<arg line="--host ${admin.host}" />
			<arg line="--port ${admin.port}" />
			<arg line="${appname}" />
		</exec>
	</target>
	
	
	
	
</project>
